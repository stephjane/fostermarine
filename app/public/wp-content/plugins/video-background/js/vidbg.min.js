/**
 * Video Background
 * Copyright 2017 Push Labs
 * @preserve
 */
!function($){$.vidbg=function(o,i){function e(o){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;o=o.replace(i,function(o,i,e,t){return i+i+e+e+t+t});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}var t=this,n="Not implemented";t.$el=$(o),t.el=o,t.$el.data("vidbg",t),t.init=function(){t.options=$.extend({},$.vidbg.defaultOptions,i),t.container(),t.displayPoster(),t.selfHostVideo(),t.overlay()},t.isMobile=function(){return!!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)},t.container=function(){var o=t.$container=$('<div class="vidbg-container">');"static"===t.$el.css("position")&&t.$el.css("position","relative"),t.$el.css("z-index","1"),$(t.$el).prepend(o),t.$el.is("body")&&o.css({position:"fixed"})},t.overlay=function(){var o=t.$container,i=t.$overlay=$('<div class="vidbg-overlay">');!0===t.options.overlay&&i.css({background:"rgba("+e(t.options.overlayColor).r+", "+e(t.options.overlayColor).g+", "+e(t.options.overlayColor).b+", "+t.options.overlayAlpha+")"}),o.append(i)},t.displayPoster=function(){var o=t.$container;"#"!==t.options.poster&&(!0===t.isMobile()?o.css("background-image","url("+t.options.poster+")"):"#"===t.options.mp4&&"#"===t.options.webm&&o.css("background-image","url("+t.options.poster+")"))},t.selfHostVideo=function(){if(!0!==t.isMobile()&&("#"!==t.options.mp4||"#"!==t.options.webm)){var o=t.$container,i=t.$selfHostVideo=$('<video playsinline><source src="'+t.options.mp4+'" type="video/mp4"><source src="'+t.options.webm+'" type="video/webm"></video>');try{i.prop({autoplay:!0,loop:t.options.repeat,volume:1,muted:t.options.mute,defaultMuted:t.options.mute,playbackRate:1,defaultPlaybackRate:1})}catch(o){throw new Error("Not implemented")}i.one("canplaythrough.vidbg",function(){t.resize()}),i.one("playing.vidbg",function(){i.css({opacity:1})}),o.append(i)}},t.resize=function(){if(!0!==t.isMobile()&&("#"!==t.options.mp4||"#"!==t.options.webm)){var o=t.$container,i=o.outerHeight(),e=o.outerWidth(),n;n=t.$selfHostVideo;var a,s;a=n[0].videoHeight,s=n[0].videoWidth,e/s>i/a?n.css({width:e+2,height:"auto"}):n.css({width:"auto",height:i+2})}},t.init()},$.vidbg.defaultOptions={mp4:"#",webm:"#",poster:"#",mute:!0,repeat:!0,overlay:!1,overlayColor:"#000",overlayAlpha:"0.3"},$.vidbg.instanceCollection={instance:[]},$.fn.vidbg=function(o){return this.each(function(){var i=$.data(this,"vidbg");i=new $.vidbg(this,o),i.index=$.vidbg.instanceCollection.instance.push(i)-1,$.data(this,"vidbg",i)})},$(document).ready(function(){$(window).on("resize.vidbg",function(){for(var o=$.vidbg.instanceCollection.instance.length,i=0,e;i<o;i++)(e=$.vidbg.instanceCollection.instance[i])&&e.resize()})})}(jQuery);